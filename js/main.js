(()=>{var t={215:()=>{function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(t){if("string"==typeof t)return e(t,a);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,a):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}var a=[{name:"Выручка, руб",currentDay:500521,yesterday:480521,weekDay:4805121},{name:"Наличные",currentDay:3e5,yesterday:3e5,weekDay:3e5},{name:"Безналичный расчет",currentDay:1e5,yesterday:1e5,weekDay:1e5},{name:"Кредитные карты",currentDay:100521,yesterday:100521,weekDay:100521},{name:"Средний чек, руб",currentDay:1300,yesterday:900,weekDay:900},{name:"Средний гость, руб",currentDay:1200,yesterday:800,weekDay:800},{name:"Удаления из чека (после оплаты), руб",currentDay:1e3,yesterday:1100,weekDay:900},{name:"Удаления из чека (до оплаты), руб",currentDay:1300,yesterday:1300,weekDay:900},{name:"Количество чеков",currentDay:34,yesterday:36,weekDay:34},{name:"Количество гостей",currentDay:34,yesterday:36,weekDay:32}];function r(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}var n=function(t){var e=new Date;e.setDate(e.getDate()-t);var a=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(a,".").concat(r)};var o=new Map;document.addEventListener("DOMContentLoaded",function(){var e,s,i;i=document.querySelector("#analytics-table tbody"),a.forEach(function(t){var e=document.createElement("tr"),a=document.createElement("tr");a.classList.add("empty-row"),a.innerHTML='\n            <td colspan="4">\n                <div class="chart__container">\n                    <div class="chart__title">График показателя</div>\n                    <canvas class="js-data-chart"></canvas>\n                </div>\n            </td>\n        ',e.dataset.name=t.name,e.dataset.currentDay=t.currentDay,e.dataset.yesterday=t.yesterday,e.dataset.weekDay=t.weekDay;for(var n=parseInt(t.currentDay),o=parseInt(t.yesterday),s=parseInt(t.weekDay),c=Math.min(n,o,s),l=[],d=0;d<5;d++){var y=.8+.4*Math.random();l.push(Math.round(c*y))}l.push(o),l.push(n),e.dataset.sevenDays=l;var u,p,m=(u=t.yesterday,p=t.currentDay,0===u?0===p?0:1/0:Math.round((p-u)/Math.abs(u)*100)),f=m>=0?"positive":"negative",v=m>0?"+":"",h=m>0?"td-positive":m<0?"td-negative":"",D=t.currentDay>t.weekDay?"td-positive":t.currentDay<t.weekDay?"td-negative":"";e.innerHTML="\n            <td>".concat(t.name,"</td>\n            <td>").concat(r(t.currentDay),'</td>\n            <td class="').concat(h,'">').concat(r(t.yesterday),' <span class="').concat(f,'">').concat(v).concat(m,'%</span></td>\n            <td class="').concat(D,'">').concat(r(t.weekDay),"</td>\n        "),i.appendChild(e),i.appendChild(a)}),e=document.querySelectorAll("#analytics-table tbody tr:not(.empty-row)"),s=null,e.forEach(function(e){e.addEventListener("click",function(){if(s){s.classList.remove("selected");var a=s.nextElementSibling;a&&a.classList.contains("empty-row")&&(a.classList.remove("show"),a.querySelector(".chart__container").style.opacity="0")}e.classList.add("selected"),s=e;var i=e.nextElementSibling;if(i&&i.classList.contains("empty-row"))if(i.classList.add("show"),setTimeout(function(){i.querySelector(".chart__container").style.opacity="1"},100),o.has(e)){var c=o.get(e),l=e.dataset.sevenDays;c.data.datasets[0].data=l.split(",").map(function(t){return Number(t)}),c.update()}else{var d=function(e,a){var o=e.querySelector(".js-data-chart"),s=e.querySelector(".chart__title");if(!o)return null;var i=a.dataset.name,c=a.dataset.sevenDays.split(",").map(function(t){return Number(t)}),l=Math.min.apply(Math,t(c)),d=Math.max.apply(Math,t(c)),y=.1*(d-l),u=l===d?l-100:l-y,p=l===d?d+100:d+y;return s.textContent="График: ".concat(i),Chart.register({id:"axisDots",afterDraw:function(t){var e=t.ctx,a=t.scales.x,r=t.scales.y;e.save(),e.strokeStyle="#333333",e.lineWidth=1,e.beginPath(),e.moveTo(a.left,a.bottom),e.lineTo(a.right,a.bottom),e.stroke(),e.fillStyle="#333333";for(var n=a.ticks.length,o=0;o<n;o++){var s=a.getPixelForTick(o),i=a.bottom;e.fillRect(s-3,i-3,6,6)}e.strokeStyle="#333333",e.lineWidth=1,e.beginPath(),e.moveTo(r.left,r.top),e.lineTo(r.left,r.bottom),e.stroke(),e.fillStyle="#333333";for(var c=r.ticks.length,l=0;l<c;l++){var d=r.left,y=r.getPixelForTick(l);e.fillRect(d-3,y-3,6,6)}e.restore()}}),new Chart(o,{type:"line",data:{labels:[n(6),n(5),n(4),n(3),"Позавчера","Вчера","Текущий день"],datasets:[{label:i,data:c,borderColor:"#037d50",borderWidth:2,fill:!1,pointBackgroundColor:"#037d50",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,pointStyle:"circle"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(t){return"".concat(t.dataset.label,": ").concat(r(t.raw))}}}},scales:{x:{grid:{display:!1},ticks:{display:!1},border:{display:!1}},y:{beginAtZero:!1,suggestedMin:u,suggestedMax:p,grid:{display:!1},ticks:{display:!1},border:{display:!1}}}}})}(i,e);o.set(e,d)}})})})}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,a),o.exports}(()=>{"use strict";a(215)})()})();